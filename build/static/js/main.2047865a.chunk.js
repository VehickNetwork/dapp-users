(this["webpackJsonp@elrondnetwork/dapp-template"]=this["webpackJsonp@elrondnetwork/dapp-template"]||[]).push([[0],{477:function(e,t,n){},561:function(e,t){},563:function(e,t){},574:function(e,t){},576:function(e,t){},592:function(e,t){},611:function(e,t){},612:function(e,t){},618:function(e,t){},620:function(e,t){},638:function(e,t){},654:function(e,t,n){var a={"./bls.js":340,"./bls_c.js":366};function c(e){var t=s(e);return n(t)}function s(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}c.keys=function(){return Object.keys(a)},c.resolve=s,e.exports=c,c.id=654},731:function(e,t){},913:function(e,t,n){},915:function(e,t,n){"use strict";n.r(t);n(477);var a=n(0),c=n.n(a),s=n(39),r=n.n(s),i=n(20),o=n(81),l=n(18),d="erd1qqqqqqqqqqqqqpgq0pahcf33c0u05uqpk679t7lmqk273slgfuuqy33lec",j="Vehick Network",u=n(1),b=function(e,t){return function(){var n=Object(a.memo)(t);return Object(a.useEffect)((function(){document.title=e}),[]),Object(u.jsx)(n,{})}},m=n(13),h=n(9),x=n(5),f=n.n(x),O=n(8),p=n(38),g=n(69),v=function(){var e=Object(i.g)(),t=Object(i.i)().hasPendingTransactions,n=Object(i.h)().network,c=e.address,s=a.useState(),r=Object(h.a)(s,2),o=r[0],l=r[1],j=a.useState(),b=Object(h.a)(j,2),x=b[0],v=b[1],w=a.useState(null),N=Object(h.a)(w,2)[1],y=a.useState(),k=Object(h.a)(y,2),A=k[0],C=k[1];a.useEffect((function(){var e=new O.Query({address:new O.Address(d),func:new O.ContractFunction("getVIN"),args:[new O.AddressValue(new O.Address(c))]});new O.ProxyProvider(n.apiAddress).queryContract(e).then((function(e){var t=e.returnData,n=Object(h.a)(t,1)[0];switch(console.log(n),n){case void 0:case"":l(!1);break;default:l(!0)}})).catch((function(e){console.error("Unable to call VM query",e)}));var t=new O.Query({address:new O.Address(d),func:new O.ContractFunction("getMeasureUnit"),args:[new O.AddressValue(new O.Address(c))]});new O.ProxyProvider(n.apiAddress).queryContract(t).then((function(e){var t=e.returnData,n=Object(h.a)(t,1)[0];switch(console.log(n),n){case void 0:case"":v(!1);break;default:v(!0)}})).catch((function(e){console.error("Unable to call VM query",e)}))}),[t]);var M=i.f.sendTransactions,T=function(){var e=Object(m.a)(f.a.mark((function e(){var t,n,a,c,s,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=Number(A).toString(16)).length%2==1&&(t=String("0"+t)),n=O.TransactionPayload.contractCall().setFunction(new O.ContractFunction("addMileage")).setArgs([O.BytesValue.fromHex(t)]).build(),a=new O.GasLimit(((new O.NetworkConfig).MinGasLimit.valueOf()+O.GasLimit.forTransfer(n).valueOf())*new O.GasLimit(25).valueOf()),c={value:"0",data:new String(n),gasLimit:a,receiver:d},e.next=7,Object(i.e)();case 7:return e.next=9,M({transactions:c,transactionsDisplayInfo:{processingMessage:"Processing Mileage transaction",errorMessage:"An error has occured during addMileage",successMessage:"Mileage transaction successful"},redirectAfterSign:!1});case 9:s=e.sent,null!=(r=s.sessionId)&&N(r);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(m.a)(f.a.mark((function e(){var t,n,a,c,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=O.TransactionPayload.contractCall().setFunction(new O.ContractFunction("addVIN")).setArgs([O.BytesValue.fromUTF8(String(A))]).build(),n=new O.GasLimit(((new O.NetworkConfig).MinGasLimit.valueOf()+O.GasLimit.forTransfer(t).valueOf())*new O.GasLimit(25).valueOf()),a={value:"0",data:new String(t),gasLimit:n,receiver:d},e.next=5,Object(i.e)();case 5:return e.next=7,M({transactions:a,transactionsDisplayInfo:{processingMessage:"Processing Vin transaction",errorMessage:"An error has occured during Vin",successMessage:"Vin transaction successful"},redirectAfterSign:!1});case 7:c=e.sent,null!=(s=c.sessionId)&&N(s);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(m.a)(f.a.mark((function e(){var t,n,a,c,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=O.TransactionPayload.contractCall().setFunction(new O.ContractFunction("addMeasureUnit")).setArgs([O.BytesValue.fromUTF8(String(A))]).build(),n=new O.GasLimit(((new O.NetworkConfig).MinGasLimit.valueOf()+O.GasLimit.forTransfer(t).valueOf())*new O.GasLimit(25).valueOf()),a={value:"0",data:new String(t),gasLimit:n,receiver:d},e.next=5,Object(i.e)();case 5:return e.next=7,M({transactions:a,transactionsDisplayInfo:{processingMessage:"Processing MeasureUnit transaction",errorMessage:"An error has occured during MeasureUnit",successMessage:"MeasureUnit transaction successful"},redirectAfterSign:!1});case 7:c=e.sent,null!=(s=c.sessionId)&&N(s);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(u.jsxs)("div",{className:"d-flex mt-4 justify-content-center",children:[o&&x&&!t?Object(u.jsxs)("div",{className:"action-btn",onClick:T,children:[Object(u.jsx)("button",{className:"btn",children:Object(u.jsx)(g.FontAwesomeIcon,{icon:p.faArrowUp,className:"text-primary"})}),Object(u.jsx)("a",{href:"/",className:"text-white text-decoration-none",children:"addMileage"})]}):Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("div",{className:"d-flex flex-column",children:Object(u.jsx)("div",{className:"action-btn not-allowed disabled"})})}),o||t?Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("div",{className:"d-flex flex-column",children:Object(u.jsx)("div",{className:"action-btn disabled"})})}):Object(u.jsx)("div",{className:"d-flex flex-column",children:Object(u.jsxs)("div",{className:"action-btn",onClick:S,children:[Object(u.jsx)("button",{className:"btn",children:Object(u.jsx)(g.FontAwesomeIcon,{icon:p.faArrowUp,className:"text-primary"})}),Object(u.jsx)("span",{className:"text-white",children:Object(u.jsx)("a",{href:"/",className:"text-white text-decoration-none",children:"Add VIN"})})]})}),x||t?Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("div",{className:"d-flex flex-column",children:Object(u.jsx)("div",{className:"action-btn disabled"})})}):Object(u.jsx)("div",{className:"d-flex flex-column",children:Object(u.jsxs)("div",{className:"action-btn",onClick:F,children:[Object(u.jsx)("button",{className:"btn",children:Object(u.jsx)(g.FontAwesomeIcon,{icon:p.faArrowUp,className:"text-primary"})}),Object(u.jsx)("span",{className:"text-white",children:Object(u.jsx)("a",{href:"/",className:"text-white text-decoration-none",children:"Add Measure Unit"})})]})}),Object(u.jsx)("div",{children:Object(u.jsx)("input",{onChange:function(e){C(e.target.value),console.log(A)}})})]})},w=function(){var e=Object(i.g)(),t=e.address,n=e.account;return Object(u.jsxs)("div",{className:"text-white","data-testid":"topInfo",children:[Object(u.jsxs)("div",{className:"mb-1",children:[Object(u.jsx)("span",{className:"opacity-6 mr-1",children:"Your address:"}),Object(u.jsxs)("span",{"data-testid":"accountAddress",children:[" ",t]})]}),Object(u.jsxs)("div",{className:"mb-4",children:[Object(u.jsx)("span",{className:"opacity-6 mr-1",children:"Contract address:"}),Object(u.jsxs)("span",{"data-testid":"contractAddress",children:[" ",d]})]}),Object(u.jsx)("div",{children:Object(u.jsx)("h3",{className:"py-2",children:Object(u.jsx)(i.c.Denominate,{value:n.balance,"data-testid":"balance"})})})]})},N=n(473),y=n.n(N),k=function(e){return function(){var t=Object(m.a)(f.a.mark((function t(n){var a,c,s,r,i,o;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.apiAddress,c=n.address,s=n.contractAddress,r=n.timeout,t.prev=1,t.next=4,y.a.get("".concat(a).concat(e),{params:{sender:c,receiver:s,condition:"must",size:25},timeout:r});case 4:return i=t.sent,o=i.data,t.abrupt("return",{data:o,success:void 0!==o});case 9:return t.prev=9,t.t0=t.catch(1),t.abrupt("return",{success:!1});case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},A=k("/transactions"),C=(k("/transactions/count"),n(36)),M=n(2),T=n(277),S=n.n(T),F={pending:"Pending",notExecuted:"Not Executed",success:"Success",fail:"Failed"},L=function(e){var t,n=e.tx,a=e.incomingTransaction;switch(n.status){case F.notExecuted:t=function(){return Object(u.jsx)(g.FontAwesomeIcon,{icon:p.faBan,className:"text-danger"})};break;case F.fail:t=function(){return Object(u.jsx)(g.FontAwesomeIcon,{icon:p.faTimes,className:"text-danger"})};break;default:t=function(){return Object(u.jsx)(g.FontAwesomeIcon,{icon:a?p.faArrowUp:p.faArrowDown,className:"text-secondary"})}}return Object(u.jsx)("i",{className:"m-3 circle",children:Object(u.jsx)(t,{})})};function P(e,t){return e.timestamp<t.timestamp?1:e.timestamp>t.timestamp?-1:0}var E,q,I="erd000000000000000000000000000000000000000000000000000000000a",V=function(e){var t=e.transactions,n=Object(i.h)().network,a=Object(i.g)(),c=t.filter((function(e){return e.sender===e.receiver&&""!==e.blockHash})).map((function(e){return Object(M.a)(Object(M.a)({},e),{},{sender:I,timestamp:e.timestamp+1})})),s=[].concat(Object(C.a)(t),Object(C.a)(c.length>0?c:[])).filter((function(e){return void 0!==e})).sort(P);return Object(u.jsxs)("div",{className:"p-3 mt-3",children:[Object(u.jsx)("h4",{className:"mb-3 font-weight-normal",children:"Smart Contract Transactions"}),Object(u.jsx)("div",{className:"table-responsive",children:Object(u.jsxs)("table",{className:"transactions table pb-3",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{className:"bg-light",children:[Object(u.jsx)("th",{className:"border-0 font-weight-normal"}),Object(u.jsx)("th",{className:"border-0 font-weight-normal",children:"Tx hash"}),Object(u.jsx)("th",{className:"border-0 font-weight-normal",children:"Date"}),Object(u.jsx)("th",{className:"border-0 font-weight-normal",children:"Amount"})]})}),Object(u.jsx)("tbody",{"data-testid":"transactionsList",children:s.map((function(e,t){var c,s=(c=e.sender)===a.address&&c!==I;return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:Object(u.jsx)("div",{className:"transaction-icon bg-light d-flex align-items-center justify-content-center",title:F[e.status],children:Object(u.jsx)(L,{tx:e,incomingTransaction:s})})}),Object(u.jsx)("td",{className:"transaction-hash",children:Object(u.jsx)("a",{href:"".concat(n.explorerAddress,"/transactions/").concat(e.txHash),target:"_blank",title:"View in Explorer",children:Object(u.jsx)(i.c.Trim,{"data-testid":"txHash",text:e.txHash})})}),Object(u.jsx)("td",{children:S.a.unix(e.timestamp).format("MMM Do YYYY, h:mm A")}),Object(u.jsxs)("td",{className:"text-right",children:["0"===e.value?"":Object(u.jsx)(u.Fragment,{children:e.sender===a.address?"-":"+"}),Object(u.jsx)(i.c.Denominate,{value:e.value,decimals:2})]})]},e.txHash+t)}))})]})}),Object(u.jsx)("div",{className:"d-flex justify-content-center",children:Object(u.jsx)("a",{href:"".concat(n.explorerAddress,"/address/").concat(a.address),target:"_blank",children:"See all transactions"})})]})},U=function(){var e=Object(i.h)().network.apiAddress,t=i.f.useGetActiveTransactionsStatus(),n=t.success,a=t.fail,s=t.hasActiveTransactions,r=c.a.useState({transactions:[],transactionsFetched:void 0}),o=Object(h.a)(r,2),l=o[0],j=o[1],b=Object(i.g)();c.a.useEffect((function(){(n||a||!s)&&A({apiAddress:e,address:b.address,timeout:3e3,contractAddress:d}).then((function(e){var t=e.data,n=e.success;Object(i.e)(),j({transactions:t,transactionsFetched:n})}))}),[n,a,s]);var m=l.transactions;return m.length>0?Object(u.jsx)(V,{transactions:m}):Object(u.jsx)("div",{className:"my-5",children:Object(u.jsx)(i.c.PageState,{icon:p.faExchangeAlt,className:"text-muted fa-3x",title:"No Transactions"})})},D=function(){return Object(u.jsx)("div",{className:"container py-4",children:Object(u.jsx)("div",{className:"row",children:Object(u.jsx)("div",{className:"col-12 col-md-10 mx-auto",children:Object(u.jsx)("div",{className:"card shadow-sm rounded border-0",children:Object(u.jsxs)("div",{className:"card-body p-1",children:[Object(u.jsx)("div",{className:"card rounded border-0 bg-primary",children:Object(u.jsxs)("div",{className:"card-body text-center p-4",children:[Object(u.jsx)(w,{}),Object(u.jsx)(v,{})]})}),Object(u.jsx)(U,{})]})})})})})},G=function(){return Object(u.jsx)("div",{className:"d-flex flex-fill align-items-center container",children:Object(u.jsx)("div",{className:"row w-100",children:Object(u.jsx)("div",{className:"col-12 col-md-8 col-lg-5 mx-auto",children:Object(u.jsxs)("div",{className:"card shadow-sm rounded p-4 border-0",children:[Object(u.jsxs)("div",{className:"card-body text-center",children:[Object(u.jsx)("h2",{className:"mb-3","data-testid":"title",children:j}),Object(u.jsxs)("p",{className:"mb-3",children:["This is an Vehick demo interaction with the smart contract.",Object(u.jsx)("br",{})," Login using your Elrond Credentials."]}),Object(u.jsx)(o.b,{to:R.unlock,className:"btn btn-primary mt-3 text-white","data-testid":"loginBtn",children:"Login"})]}),Object(u.jsx)("a",{target:"_blank",className:"text-center pt-4 text-muted",href:"https://github.com/VehickNetwork/dapp-users#readme",children:"Check steps here..."})]})})})})},B=function(){var e=Object(l.e)().search,t=Object(i.h)().network,n=new URLSearchParams(e),a=Object.fromEntries(n),c=a.status,s=a.txHash;return"success"===c?Object(u.jsx)(i.c.PageState,{icon:p.faCheck,iconClass:"fa-3x text-success",className:"dapp-icon icon-medium",title:"Transaction submitted successfully",description:Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("p",{children:Object(u.jsx)("a",{href:"".concat(t.explorerAddress,"/transactions/").concat(s),target:"_blank",className:"tx-link",title:"View in Explorer",children:s})}),Object(u.jsx)(o.b,{to:R.dashboard,className:"btn btn-primary mt-3",children:"Back to dashboard"})]})}):Object(u.jsx)(i.c.PageState,{icon:p.faTimes,iconClass:"fa-3x text-danger",className:"dapp-icon icon-medium",title:"Error sending transaction",description:Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("p",{children:"Try again"}),Object(u.jsx)("a",{href:R.dashboard,className:"btn btn-primary mt-3",children:"Back to dashboard"})]})})},R={home:"/",dashboard:"/dashboard",transaction:"/transaction",unlock:"/unlock",ledger:"/ledger",walletconnect:"/walletconnect"},H=[{path:R.home,title:"Home",component:G},{path:R.dashboard,title:"Dashboard",component:D,authenticatedRoute:!0},{path:R.transaction,title:"Transaction",component:B}].map((function(e){var t=e.title?"".concat(e.title," \u2022 ").concat(j):"".concat(j),n=Boolean(e.authenticatedRoute),a=b(t,e.component);return{path:e.path,component:a,authenticatedRoute:n}})),_=["title","titleId"];function Y(){return Y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Y.apply(this,arguments)}function z(e,t){if(null==e)return{};var n,a,c=function(e,t){if(null==e)return{};var n,a,c={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}function J(e,t){var n=e.title,c=e.titleId,s=z(e,_);return a.createElement("svg",Y({width:"14px",height:"12px",viewBox:"0 0 14 12",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":c},s),void 0===n?a.createElement("title",{id:c},"heart"):n?a.createElement("title",{id:c},n):null,E||(E=a.createElement("desc",null,"Created with Sketch.")),q||(q=a.createElement("g",{id:"heart",stroke:"none",strokeWidth:1,fillRule:"evenodd"},a.createElement("path",{d:"M7.00249318,12 L1.23954171,6.67000631 C0.219967339,5.73025806 -0.214165447,4.32384166 0.101003225,2.98159749 C0.416171897,1.63935333 1.4326464,0.565685745 2.76676674,0.165841807 C4.10088708,-0.234002131 5.54948604,0.100868016 6.56580179,1.04405825 L7.00249318,1.44795492 L7.43918869,1.04405825 C9.01100287,-0.409657356 11.4775242,-0.328715349 12.9483183,1.22484728 C14.4191125,2.77840991 14.3372196,5.21629062 12.7654055,6.67000631 L7.00249318,12 Z",id:"Path",fillRule:"nonzero"}))))}var Q=a.forwardRef(J),W=(n.p,function(){return Object(u.jsx)("footer",{className:"text-center mt-2 mb-3",children:Object(u.jsx)("div",{children:Object(u.jsxs)("a",{target:"_blank",className:"d-flex align-items-center",href:"https://vehicknetwork.com/",children:["Made with ",Object(u.jsx)(Q,{className:"mx-1"})," by Vehick Network."]})})})}),X=n(923),Z=n(924),K=n(474),$=function(){var e=Object(i.g)().address,t=Boolean(e);return Object(u.jsx)(X.a,{className:"bg-white border-bottom px-4 py-3",children:Object(u.jsxs)("div",{className:"container-fluid",children:[Object(u.jsx)(o.b,{className:"d-flex align-items-center navbar-brand mr-0",to:t?R.dashboard:R.home,children:Object(u.jsx)("span",{className:"text-3xl text-muted",children:j})}),Object(u.jsx)(Z.a,{className:"ml-auto",children:t&&Object(u.jsx)(K.a,{children:Object(u.jsx)("button",{className:"btn btn-link",onClick:function(){Object(i.d)("".concat(window.location.origin,"/unlock"))},children:"Close"})})})]})})},ee=function(e){var t=e.children,n=Object(l.e)().search;return Object(u.jsxs)("div",{className:"bg-light d-flex flex-column flex-fill wrapper",children:[Object(u.jsx)($,{}),Object(u.jsx)("main",{className:"d-flex flex-column flex-grow-1",children:Object(u.jsx)(i.a,{routes:H,unlockRoute:"".concat(R.unlock).concat(n),children:t})}),Object(u.jsx)(W,{})]})},te=function(){var e=Object(l.e)().pathname;return Object(u.jsx)("div",{className:"d-flex flex-fill align-items-center container",children:Object(u.jsx)("div",{className:"row w-100",children:Object(u.jsx)("div",{className:"col-12 col-md-8 col-lg-5 mx-auto",children:Object(u.jsx)("div",{className:"card shadow-sm rounded p-4 border-0",children:Object(u.jsxs)("div",{className:"card-body text-center d-flex flex-column justify-content-center",children:[Object(u.jsx)("div",{className:"dapp-icon icon-medium",children:Object(u.jsx)(g.FontAwesomeIcon,{icon:p.faSearch,className:"mx-auto text-muted fa-3x mb-2"})}),Object(u.jsx)("span",{className:"h4 empty-heading mt-3",children:"Page not found"}),Object(u.jsx)("span",{className:"empty-details",children:e})]})})})})})},ne=(n(912),i.c.TransactionsToastList),ae=i.c.SignTransactionsModals,ce=i.c.NotificationModal,se=i.c.DappCorePages.UnlockPage,re=function(){return Object(u.jsx)(o.a,{children:Object(u.jsx)(i.b,{environment:"devnet",customNetworkConfig:{name:"customConfig",apiTimeout:6e3},completedTransactionsDelay:200,children:Object(u.jsxs)(ee,{children:[Object(u.jsx)(ne,{}),Object(u.jsx)(ce,{}),Object(u.jsx)(ae,{className:"custom-class-for-modals"}),Object(u.jsxs)(l.c,{children:[Object(u.jsx)(l.a,{path:R.unlock,element:Object(u.jsx)(se,{loginRoute:R.dashboard})}),H.map((function(e,t){return Object(u.jsx)(l.a,{path:e.path,element:Object(u.jsx)(e.component,{})},"route-key-"+t)})),Object(u.jsx)(l.a,{path:"*",element:Object(u.jsx)(te,{})})]})]})})})};n(913);r.a.render(Object(u.jsx)(re,{}),document.getElementById("root"))}},[[915,1,2]]]);
//# sourceMappingURL=main.2047865a.chunk.js.map